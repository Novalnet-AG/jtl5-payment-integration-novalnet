/*
 * Novalnet payment plugin
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Novalnet End User License Agreement
 *
 * DISCLAIMER
 *
 * If you wish to customize Novalnet payment extension for your needs,
 * please contact technic@novalnet.de for more information.
 *
 * @author      Novalnet AG
 * @copyright   Copyright (c) Novalnet
 * @license     https://www.novalnet.de/payment-plugins/kostenlos/lizenz
 *
 * Novalnet wallet payment script
*/
jQuery(document).ready((function(){if(jQuery(".btn-primary").hide(),jQuery("#nn_applepay_not_support").val()){var t=iOS(),a=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);t||a||jQuery("#novalnet_applepay_error_alert").removeClass("d-none")}}));var articleDetails=walletPaymentData.article_details,merchantInformation={countryCode:walletPaymentData.country_code?walletPaymentData.country_code:"DE",partnerId:jQuery("#nn_merchant_id").val()},transactionInformation={amount:String(walletPaymentData.amount),currency:walletPaymentData.currency,paymentMethod:walletPaymentData.payment_type,enforce3d:Boolean(jQuery("#nn_enforce").val()),environment:"on"==walletPaymentData.test_mode?"SANDBOX":"PRODUCTION"},buttonInformation={type:walletPaymentData.button_type,locale:"eng"==walletPaymentData.lang?"en-US":"de-DE",boxSizing:"fill",dimensions:{height:walletPaymentData.button_height}},orderInformation={merchantName:walletPaymentData.seller_name,lineItems:articleDetails},paymentIntent={clientKey:walletPaymentData.client_key,paymentIntent:{merchant:merchantInformation,transaction:transactionInformation,order:orderInformation,button:buttonInformation,callbacks:{onProcessCompletion:function(t,a){t.result&&t.result.status&&("SUCCESS"==t.result.status?(jQuery("#nn_wallet_token").val(t.transaction.token),jQuery("#nn_wallet_amount").val(t.transaction.amount),jQuery("#nn_wallet_doredirect").val(t.transaction.doRedirect),document.getElementById("form_payment_extra").submit()):t.result.statusText&&alert(t.result.statusText))}}}};try{if("GOOGLEPAY"==walletPaymentData.payment_type||"APPLEPAY"==walletPaymentData.payment_type){var novalnetPaymentInstance=NovalnetPayment(),novalnetPaymentObj=novalnetPaymentInstance.createPaymentObject();novalnetPaymentObj.setPaymentIntent(paymentIntent),novalnetPaymentObj.isPaymentMethodAvailable((function(t){t&&novalnetPaymentObj.addPaymentButton("#wallet_container")}))}}catch(t){console.log(t.message)}function iOS(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")}